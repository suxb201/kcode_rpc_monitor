# 初赛赛题

## 赛题背景
在做系统设计的时候往往将一个复杂系统切分为几个至几十个微服务，随着服务粒度的细化，微服务数量极速上涨。在快手，服务间调用量最高峰可以达到每秒千万次，每天高达数百亿次。为了对各个服务的监控状况进行监控和分析，需要收集服务间调用信息，这些调用信息包括：主调服务名、主调方IP、被调服务名、被调方IP、耗时、结果，调用发生时间等等。根据这些调用信息我们可以分析出服务的健康状况，例如：成功率、延迟情况、QPS等等。

## 题目内容
实现进程内对微服务调用信息的分析和查询系统，要求包含的功能如下：
- 接收和分析调用信息的接口
- 根据给定的条件进行查询和分析，描述如下：
  - 输入主调服务名、被调服务名和时间（分钟粒度），返回在这一分钟内主被调按ip聚合的成功率和P99(按成功率倒排)；
  - 输入被调服务名和一个时间范围（分钟粒度, **==闭区间==**），返回在区间内被调的平均成功率

# 参考
- https://git.teknik.io/xhe/kcode_initial/src/branch/master